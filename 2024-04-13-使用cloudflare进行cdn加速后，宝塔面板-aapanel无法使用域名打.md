---
title: 使用Cloudflare进行CDN加速后，宝塔面板/aaPanel无法使用域名打开的解决方案
date: 2024-04-13 09:23:01
---

近期打算All in Cloudflare,把所有的域名DNS都转到CF，然后悲催地发现，服务器管理面板aapanel无法打开了，一开始以为是解析的问题，在排除解析和防火墙放行端口问题后依然无法打开，最后才发现是Cloudflare可用回源端口的问题。

概括一下，就是CF只开放了部分指定端口，所以自定义的宝塔面板或者aapanel默认8888端口或者自定义端口都无法使用，只有改成CF开放的端口才行。

查询了一下Cloudflare的文档，CF开放的端口包括下面这些：

http开放端口：
<blockquote>80
8080
8880
2052
2082
2086
2095</blockquote>
https开放端口：
<blockquote>443
2053
2083
2087
2096
8443</blockquote>
如果仍然打算使用域名+端口访问面板，那就需要把端口号改成上面这些，请注意http和https支持的端口是不同的。

最后，如果你的服务器服务商自带防火墙，需要在防火墙里放行你使用的端口号。